
base_experiment: # the base config object  
  environment:
    num_clients: 48
    num_selected_clients: 48
    num_malicious_clients: 0
    experiment_name: "mnist_clients"
    use_config_dir: true
  server:
    num_rounds: 160
    num_test_batches: 25
    aggregator:
      name: FedAvg
    global_learning_rate: 1.0
  client:
    model_name: dev
    model_init_path: "/home/ubuntu/rofl-project-code/models/mnist_dev_initialized.txt"
    model_weight_regularization: 0.0001
    benign_training:
      num_epochs: 5
      batch_size: 32
      optimizer: SGD
      learning_rate: 0.05
    num_params: 19166
    quantization:
      type: probabilistic
      bits: 8
      frac: 7
  dataset:
    dataset: mnist
    data_distribution: IID
    augment_data: false
  job:
    minutes: 240 # Max. minutes to run. Leonhard has 240 and 1440 queues
    cpu_cores: 20
    cpu_mem_per_core: 4096
    use_gpu: 1
    gpu_memory_min: 10240
  crypto:
    enc_type: $VARIES #l2, Range, Plain
    fp_bits: 16
    fp_frac: 7
    value_range: 8
    n_partition: 64
    l2_value_range: 32
    check_percentage: 1.0
  e2e:
    client_machines: 4 # is this correct?
    speculative_execution: $VARIES$

experiments: # in the experiments object you have a list for the different experiments with the values for the fields marked as $VARIES$ in the base config object.

#- client: # plain
#    quantization: ~
#  crypto:
#    enc_type: Plain
#  e2e:
#    speculative_execution: false
#
#- client: # l2, optimized
#    model_name: dev_intrinsic
#    num_params: 5000
#    model_init_path: "/home/ubuntu/rofl-project-code/models/mnist_dev_intrinsic_5k.txt"
#    quantization:
#      type: probabilistic
#      bits: 8
#      frac: 7
#    model_weight_regularization: 0.01
#    benign_training:
#      learning_rate: 0.1
#      decay:
#        type: boundaries
#        decay_boundaries: [ 13000 ]
#        decay_values: [ 1.0, 0.1 ]
#  server:
#    intrinsic_dimension: 5000
#  crypto:
#    enc_type: l2
#    fp_bits: 32
#    fp_frac: 7
#  e2e:
#    speculative_execution: true
#
#- crypto: # l2, unoptimized
#    enc_type: l2
#    fp_bits: 32
#  e2e:
#    speculative_execution: false
#
#- crypto: # linf, optimized
#    enc_type: Range
#    check_percentage: 0.176 # 0-100 for Range, # 3370
#  e2e:
#    speculative_execution: true
#- crypto: # linf, unoptimized
#    enc_type: Range
#    check_percentage: 1.0
#  e2e:
#    speculative_execution: false
#
##- crypto: # linf, compressed, unoptimized
##    enc_type: RangeCompressed
##    check_percentage: 1.0
##  e2e:
##    speculative_execution: false
##- crypto: # l2, compressed, unoptimized
##    enc_type: l2Compressed
##    fp_bits: 32
##  e2e:
##    speculative_execution: false
#
#- crypto: # linf, compressed, optimized
#    enc_type: RangeCompressed
#    check_percentage: 0.176 # 0-100 for Range, # 3370
#  e2e:
#    speculative_execution: true
- client: # l2, compressed, optimized
    model_name: dev_intrinsic
    num_params: 5000
    model_init_path: "/home/ubuntu/rofl-project-code/models/mnist_dev_intrinsic_5k.txt"
    quantization:
      type: probabilistic
      bits: 8
      frac: 7
    model_weight_regularization: 0.01
    benign_training:
      learning_rate: 0.1
      decay:
        type: boundaries
        decay_boundaries: [ 13000 ]
        decay_values: [ 1.0, 0.1 ]
  server:
    intrinsic_dimension: 5000
  crypto:
    enc_type: l2Compressed
    fp_bits: 32
    fp_frac: 7
  e2e:
    speculative_execution: true
